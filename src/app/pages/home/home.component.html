<div class="container">
    <div class="card main-card mb-3">
        <div class="row">
            <div class="col-12">
                <div class="mx-auto text-center">
                    <mat-slide-toggle [matTooltip]="'TOOLTIPS.SWITCH_ENCRYPTION_AND_DECRYPTION' | translate"
                        [(ngModel)]="isChecked" class="slide-ecode-decode">{{(isChecked === true)?('LABELS.ENCRYPTION' |
                        translate):('LABELS.DECRYPTION' | translate)}}</mat-slide-toggle>
                </div>
            </div>

            <!-- المصدر والوجهة لكافة التشفيرات -->
            <div class="card container ciphers-card mx-auto d-block">
                <div class="row">
                    <div class="col-12 header-ciphers">
                        <ul>
                            <label for="">{{'LABELS.CHOOSE_AN_ALGORITHM' | translate}}:</label>
                            <li *ngFor="let item of items">
                                <button
                                    [matTooltip]="(translateService.currentLang === 'ar')? item.ar_name: item.en_name">{{(translateService.currentLang
                                    === 'ar')? item.ar_short: item.en_short}}</button>
                            </li>
                        </ul>
                    </div>
                    <!-- source -->
                    <div class="col-6 right-area">
                        <div [class]="(translateService.currentLang === 'ar')? 'corner-top-left': 'corner-top-right'">
                            <i class="mdi mdi-close icon-x" *ngIf="this.plainText.value.length !== 0" (click)="clear()"
                                [matTooltip]="'BUTTONS.CLEAR' | translate"></i>
                        </div>
                        <div
                            [class]="(translateService.currentLang === 'ar')? 'corner-top-left mt-7': 'corner-top-right mt-7'">
                            <i class="mdi mdi-refresh icon-x" *ngIf="this.plainText.value.length !== 0"
                                (click)="encrypt()" [matTooltip]="(isChecked === true)?('LABELS.ENCRYPTION' |
                                translate):('LABELS.DECRYPTION' | translate)"></i>
                        </div>
                        <div
                            [class]="(translateService.currentLang === 'ar')? 'corner-bottom-left mb-3':'corner-bottom-right mb-3'">
                            <mat-hint dir="ltr" align="start">{{plainText.value.length}} / 500</mat-hint>
                        </div>
                        <div
                            [class]="(translateService.currentLang === 'ar')? 'corner-bottom-right':'corner-bottom-left'">
                            <mat-form-field class="text-input mr-2">
                                <mat-label>{{'LABELS.ENCRYPTION_KEY' | translate}}</mat-label>
                                <input matInput type="number" [placeholder]="'PLACEHOLDERS.ENCRYPTION_KEY' | translate"
                                    class="text-input" min="0" max="25" (change)="encrypt()" (keyup)="encrypt()"
                                    [(ngModel)]="key">
                                <mat-error align="start">
                                    {{'ERRORS.ENCRYPTION_KEY' | translate}}
                                </mat-error>
                            </mat-form-field>
                        </div>
                        <div class="row">
                            <div class="col-11 height-of-encode-box">
                                <textarea [dir]="algorithmsService.checkRtl(plainText.value) === true? 'rtl':'ltr'"
                                    (keyup)="encrypt()" #plainText class="full-width lh-lg font-24 mt-3"
                                    [(ngModel)]="source" maxlength="500" style="overflow:hidden"
                                    [placeholder]="isChecked === true? ('PLACEHOLDERS.ENCRYPTION' | translate):('PLACEHOLDERS.DECRYPTION' | translate)"></textarea>
                            </div>
                        </div>
                    </div>

                    <!-- destination -->
                    <div
                        [class]="translateService.currentLang === 'ar'? 'col-6 bg-F5 left-area' : 'col-6 bg-F5-en left-area'">

                        <mat-icon *ngIf="this.plainText.value.length !== 0"
                            [class]="(translateService.currentLang === 'ar')? 'icon material-icons-outlined corner-bottom-left ml-5' : 'icon material-icons-outlined corner-bottom-right mr-5'"
                            [matTooltip]="'BUTTONS.SHARE_PROCESS' | translate">share</mat-icon>
                        <mat-icon *ngIf="this.plainText.value.length !== 0"
                            [class]="(translateService.currentLang === 'ar')? 'icon material-icons-outlined corner-bottom-left ml-10' : 'icon material-icons-outlined corner-bottom-right mr-10'"
                            [matTooltip]="'BUTTONS.COPY_PROCESS' | translate">copy</mat-icon>
                        <mat-icon *ngIf="this.plainText.value.length !== 0"
                            [class]="(translateService.currentLang === 'ar')? 'icon material-icons-outlined corner-top-left ml-5' :'icon material-icons-outlined corner-top-right mr-5'"
                            [matTooltip]="'BUTTONS.SAVE_PROCESS' | translate">star_border</mat-icon>
                        <i *ngIf="algorithmsService.checkRtl(plainText.value) !== true? (this.plainText.value.length !== 0): false"
                            (click)="upper=!upper" [matTooltip]="'BUTTONS.SWITCH_CASE' | translate"
                            [class]="translateService.currentLang === 'ar'? (upper === true? 'icon mdi mdi-format-letter-case-upper corner-bottom-right mr-5':'icon mdi mdi-format-letter-case-lower corner-bottom-right mr-5') : (upper === true? 'icon mdi mdi-format-letter-case-upper corner-bottom-left ml-5':'icon mdi mdi-format-letter-case-lower corner-bottom-left ml-5')"></i>

                        <div class="mt-4 font-24 text-f5 text-justify lh-lg pl-10">
                            <div *ngIf="this.plainText.value.length === 0">
                                {{(isChecked === true)? ('PLACEHOLDERS.ENCRYPTION_DESTINATION' | translate) :
                                ('PLACEHOLDERS.DECRYPTION_DESTINATION' | translate)}}
                            </div>
                            <div [dir]="algorithmsService.checkRtl(plainText.value) === true? 'rtl':'ltr'"
                                *ngIf="this.plainText.value.length !== 0"
                                [class]="upper === true?'text-uppercase':'text-lowercase'">
                                {{destination}}
                            </div>

                        </div>
                    </div>
                </div>

            </div>

            <!-- كيف تعمل الخوارزمية؟ وتفاصيل حول العملية الحالية -->
            <div class="container" *ngIf="this.plainText.value.length !== 0">
                <div class="row">
                    <div class="col-6">
                        <div
                            [class]="translateService.currentLang === 'ar'? 'card additions-cards mr-3 mt-3 p-2' :'card additions-cards ml-3 mt-3 p-2'">
                            <h1 class="text-uppercase lh-lg">{{'LABELS.WHAT_DO_YOU_KNOW_ABOUT' | translate}}</h1>

                            <p class="text-justify lh-lg p-4" [innerHtml]="'LABELS.ABOUT_CAESAR_ALGORITHM' | translate">
                            </p>

                            <a href="https://ar.wikipedia.org/wiki/%D8%B4%D9%81%D8%B1%D8%A9_%D9%82%D9%8A%D8%B5%D8%B1"
                                target="_blank">{{'LABELS.SOURCE' | translate}}</a>
                        </div>

                    </div>

                    <div class="col-6">
                        <div
                            [class]="translateService.currentLang === 'ar'? 'card additions-cards ml-3 mt-3 p-2' : 'card additions-cards mr-3 mt-3 p-2'">
                            <h1 class="text-uppercase lh-lg">{{'LABELS.CURRENT_PROCESS_DETAILS' | translate}}:</h1>
                            <span>
                                {{'LABELS.PRIMARY_ALPHABETS' | translate}}:
                            </span>
                            <table>
                                <tr>
                                    <th *ngFor="let item of algorithmsService.getPrimaryAlphabets()"
                                        [class]="(source.toUpperCase().split('').indexOf(item.trim()) !== -1)?'bg-warn':''">
                                        {{item}}</th>
                                </tr>
                                <tr>
                                    <th *ngFor="let item of algorithmsService.getPrimaryAlphabets()"
                                        [class]="(source.toUpperCase().split('').indexOf(item.trim()) !== -1)?'bg-primary':''">
                                        {{algorithmsService.getPrimaryAlphabets().indexOf(item)}}</th>
                                </tr>
                            </table>

                            <span [innerHtml]="('LABELS.ENCRYPTION_KEY_LABEL' | translate).replaceAll('{{KEY}}', key)">
                            </span>
                            <table>
                                <tr>
                                    <th *ngFor="let item of algorithmsService.getPrimaryAlphabets()"
                                        [class]="(source === '')?'bg-white':(source.toUpperCase().split('').indexOf(item.trim()) !== -1)?'bg-warn':''">
                                        {{item}}</th>
                                </tr>
                                <tr>
                                    <th *ngFor="let item of algorithmsService.getNewAlphabets(key)"
                                        [class]="(destination.toUpperCase().split('').indexOf(item.trim()) !== -1)?'bg-primary':''">
                                        {{item}}</th>
                                </tr>
                            </table>

                            <span>
                                {{'LABELS.HOW_GET_THIS_RESULT' | translate}}
                            </span>

                            <ul dir="ltr" class="lh-lg mt-3">
                                <li *ngFor="let item of source.toUpperCase().split('')">{{(item.trim() !== '')? ('C =
                                    ('+ item + ' + ' + key +')mod('+ algorithmsService.getPrimaryAlphabets().length +')
                                    = ('+ algorithmsService.getPrimaryAlphabets().indexOf(item) +' + '+ key+ ')mod('+
                                    algorithmsService.getPrimaryAlphabets().length +') = '+
                                    (algorithmsService.getPrimaryAlphabets().indexOf(item) + key) +' == '+
                                    algorithmsService.getPrimaryAlphabets()[keyAfterMaximum(item)]) : 'مسافة'}} </li>
                            </ul>
                        </div>

                    </div>

                </div>
            </div>



            <!-- إرسال التعليقات -->
            <div style="position: relative;">
                <div aria-haspopup="dialog" (click)="shareLinkService.contactWithSupport()"
                    [class]="translateService.currentLang === 'ar'? 'feedback-ar':'feedback-en'"
                    jsaction="click:feqbab;D7hdBd:feqbab;" jsname="ryDGAb" role="button" tabindex="0">
                    {{'LABELS.SEND_FEEDBACK' | translate}}
                </div>
            </div>

            <!-- أزرار المفضلة والسجل والمحتوى التعليمي -->
            <nav class="all-actions mt-10"><!-- *ngIf="this.plainText.value.length === 0" -->
                <a href="./history" class="action-icon" data-probe-id="translation_history_footer_button">
                    <i class="mdi mdi-history"></i>
                    <div class="title" [innerHtml]="'BUTTONS.HISTORY' | translate"></div>
                </a>

                <a href="./history" class="action-icon" data-probe-id="translation_history_footer_button">
                    <i class="mdi mdi-star"></i>
                    <div class="title" [innerHtml]="'BUTTONS.SAVED_OPERATIONS' | translate"></div>
                </a>
                <a href="./history" class="action-icon" data-probe-id="translation_history_footer_button">
                    <i class="mdi mdi-book-open-variant"></i>
                    <div class="title" [innerHtml]="'BUTTONS.TRAINING_CURRICULUM' | translate"></div>
                </a>
            </nav>



        </div>
    </div>
</div>